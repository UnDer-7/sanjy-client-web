<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <title>Active Plan - SanJy</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <link rel="stylesheet" th:href="@{/css/diet-plan.css}">
    <style>
        /* Info Message Styles */
        .info-message {
            background-color: #d1ecf1;
            border: 1px solid #bee5eb;
            border-radius: 6px;
            padding: 20px;
            margin: 30px 0;
            animation: slideDown 0.3s ease-out;
        }

        .info-content {
            display: flex;
            align-items: flex-start;
            gap: 15px;
            flex-direction: column;
            text-align: center;
        }

        .info-icon {
            background-color: #17a2b8;
            color: white;
            width: 48px;
            height: 48px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 28px;
            margin: 0 auto;
        }

        .info-text {
            flex: 1;
            color: #0c5460;
            width: 100%;
        }

        .info-text h2 {
            margin: 0 0 10px 0;
            font-size: 1.5em;
            color: #0c5460;
        }

        .info-text p {
            margin: 0 0 20px 0;
            font-size: 1.1em;
            line-height: 1.6;
        }

        .info-actions {
            display: flex;
            gap: 15px;
            justify-content: center;
            width: 100%;
        }

        @keyframes slideDown {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile adjustments */
        @media (max-width: 768px) {
            .info-message {
                padding: 15px;
            }

            .info-text h2 {
                font-size: 1.3em;
            }

            .info-text p {
                font-size: 1em;
            }

            .info-actions {
                flex-direction: column;
            }

            .info-actions .btn {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Active Diet Plan</h1>
            <nav>
                <a th:href="@{/}">Home</a>
                <a th:href="@{/diet-plan/new}">New Plan</a>
                <a th:href="@{/meal/today}">Today's Meals</a>
                <a th:href="@{/meal/new}">Record Meal</a>
            </nav>
        </header>

        <main>
            <div th:if="${dietPlan == null}" class="info-message">
                <div class="info-content">
                    <span class="info-icon">â„¹</span>
                    <div class="info-text">
                        <h2>No Active Diet Plan Found</h2>
                        <p>You don't have an active diet plan yet. Create your first plan to start tracking your meals and nutrition goals.</p>
                    </div>
                    <div class="info-actions">
                        <a th:href="@{/diet-plan/new}" class="btn btn-primary">Create Your First Plan</a>
                        <a th:href="@{/}" class="btn btn-secondary">Go to Home</a>
                    </div>
                </div>
            </div>

            <div th:if="${dietPlan != null}" class="diet-plan-view">
                <div class="plan-header">
                    <h2 th:text="${dietPlan.name}">Plan Name</h2>
                    <span class="status-badge active">Active</span>
                </div>

                <section class="info-section">
                    <h3>Period</h3>
                    <p>
                        <strong>Start:</strong>
                        <span th:text="${#temporals.format(dietPlan.startDate, 'dd/MM/yyyy')}">15/01/2025</span>
                    </p>
                    <p>
                        <strong>End:</strong>
                        <span th:text="${#temporals.format(dietPlan.endDate, 'dd/MM/yyyy')}">15/04/2025</span>
                    </p>
                </section>

                <section class="info-section macros-section">
                    <h3>Daily Macros</h3>
                    <div class="macros-grid">
                        <div class="macro-card">
                            <span class="macro-label">Calories</span>
                            <span class="macro-value" th:text="${dietPlan.dailyCalories} + ' kcal'">2266 kcal</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Protein</span>
                            <span class="macro-value" th:text="${dietPlan.dailyProteinInG} + ' g'">186 g</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Carbs</span>
                            <span class="macro-value" th:text="${dietPlan.dailyCarbsInG} + ' g'">288 g</span>
                        </div>
                        <div class="macro-card">
                            <span class="macro-label">Fat</span>
                            <span class="macro-value" th:text="${dietPlan.dailyFatInG} + ' g'">30 g</span>
                        </div>
                    </div>
                </section>

                <section class="info-section" th:if="${dietPlan.goal != null}">
                    <h3>Goal</h3>
                    <p th:text="${dietPlan.goal}">Fat loss with muscle preservation</p>
                </section>

                <section class="info-section" th:if="${dietPlan.nutritionistNotes != null}">
                    <h3>Nutritionist Notes</h3>
                    <p th:text="${dietPlan.nutritionistNotes}">Notes...</p>
                </section>

                <section class="meals-section">
                    <h3>Planned Meals</h3>

                    <div th:each="mealType : ${dietPlan.mealTypes}" class="meal-type-card">
                        <div class="meal-type-header">
                            <h4 th:text="${mealType.name}">Breakfast</h4>
                            <span class="scheduled-time"
                                  th:text="${#temporals.format(mealType.scheduledTime, 'HH:mm')}">06:20</span>
                        </div>

                        <div class="meal-options">
                            <h5>Options:</h5>
                            <ul>
                                <li th:each="option : ${mealType.standardOptions}">
                                    <strong th:text="'Option ' + ${option.optionNumber}">Option 1</strong>:
                                    <span th:text="${option.description}">Option description</span>
                                </li>
                            </ul>
                        </div>

                        <div th:if="${mealType.observation != null and !#strings.isEmpty(mealType.observation)}" class="meal-observation">
                            <h5>Observations:</h5>
                            <p th:text="${mealType.observation}">Meal observations</p>
                        </div>
                    </div>
                </section>
            </div>
        </main>

        <footer>
            <p>&copy; 2025 SanJy - Food Control System</p>
        </footer>
    </div>
</body>
</html>
